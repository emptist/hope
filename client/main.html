<template name="main">

<header class="navbar" >
	<div class="navbar-inner">
  		{{> header}}
	</div>
</header>

<div id="main" class= "row-fluid" >
  {{#if adminLoggedIn}}
  	  {{> newKpiForm}}
	  {{> newDepartmentForm}}
	  
	  {{> bsckpis}}
	  {{> departments}}
  {{/if}}
</div>

</template>



<template name="header">
	<ul class="nav pull-right">
		<li>{{loginButtons}}</li>
	</ul>
<a class="brand" href="/"> HOPE </a>
<h1><a href='/'> 醫院績效管理 </a></h1>
{{#if adminLoggedIn}}
	{{#if showButtons}}
	<button id="bsckpis" class="btn btn-primary" "navbar-btn">指標</button>	
	<button id="newKpiForm" class="btn btn-warning" "navbar-btn">添加指標</button>	
	<button id="departments" class="btn btn-info" "navebar-btn">Depts</button>
	<button id="newDepartmentForm" class="btn btn-warning" "navebar-btn">添加Dept</button>
	<button id="printable" class="btn btn-default" "navbar-btn" >{{currentMode}}</button>
	{{/if}}
{{/if}}
</template>




<template name="newKpiForm">
{{#if show}}
	<form class="newKpiForm">
	<div class="controls">
		<input type= "text" id="perspective"  placeholder="一級維度" />
		<input type= "text" id="category"  placeholder="二級維度" />
		<input type="text" id="title"  placeholder="指標名稱" /> 
		<input type= "text" id="definition"  placeholder="定義" />
		<input type= "text" id="type"   placeholder="評分類型" />  
		<input type= "text" id="mesure"   placeholder="評分方法" /> 
		<input type="text" id="depts"  placeholder="適用部門" />
		<button id="save" class="btn btn-info"> 完成 </button>
	</div>
	</form>
{{/if}}
</template>




<template name="newDepartmentForm">
{{#if show}}
	<div class="newDepartmentForm">
		<input type="text" id="hospital"  value={{currentHospital}} placeholder="hospital" /> 
		<input type="text" id="department"  placeholder="名稱" /> 
		<input type="text" id="category"  placeholder="category" /> <br>
		<!--
		<ul id="departmentKPIsTmp">
			{{> departmentKPIsTmp}}
		</ul>
		-->
		<button id="save" class="btn btn-info"> 完成 </button>
	</div>
{{/if}}
</template>



<template name="bsckpis">
{{#if show}}
	<div class="bsckpis">
		<h1> 平衡記分卡指標庫 </h1>
		{{#each kpis}}
			{{> kpi}}
		{{/each}}
	</div>
{{/if}}
</template>



<template name="kpi">
{{#if editting}}
	{{> editKpiForm}}
{{else}}
	{{> viewKpiForm}}
{{/if}}
</template>




<template name="editKpiForm">
{{#if show}}
	<div class="editKpiForm">
		<ul>
			<li>一級維度 Perspective: <input type= "text" id="perspective" value={{perspective}} placeholder="perspective" /></li>
			<li>二級維度 Category: <input type= "text" id="category" value={{category}} placeholder="category" /></li>
			<li>指標名稱 Title: <input type="text" id="title" value={{title}} placeholder="title" /></li> 
			<li>定義 Definition: <input type= "text" id="definition" value={{definition}} placeholder="definition" /></li>
			<li>評分類型 Type: <input type= "text" id="type" value={{type}}  placeholder="type" /></li>  
			<li>評分方法 Mesure: <input type= "text" id="mesure" value={{mesure}}  placeholder="mesure" /></li> 
			<li>適用部門 Depts: <input type="text" id="depts" value={{depts}}  /></li>
			<button id="save" class="btn btn-info"> 完成 </button>
		</ul>
	</div>
{{/if}}
</template>




<template name="viewKpiForm">
	<article class="viewKpiForm" >
		<h4> 
			{{#if showButtons}}
			<button id="removeKPI" class="btn btn-danger btn-xs"> 删 </button>
			<button id="editKpiForm" class="btn btn-info btn-xs"> 編 </button>
			{{/if}} 
			<a href="/perspective&{{perspective}}">{{perspective}}</a> {{category}} {{title}}
		</h4>

		<ul>
			<li>定義: {{definition}}</li>
			<li>數據類型: {{type}}</li>  
			<li>評分方法: {{mesure}}</li>
			<li>適用科室: {{depts}}</li>
			<!--<li>createdOn: {{createdOn}}</li> </!-->
		</ul>
	</article>
</template>





<template name="departments">
{{#if show}}
	{{#if currentHospital}}
		<label> {{currentHospital}} </label>
		<hr>
		<div class="departments">
			{{#each departments}}
				{{indx}} {{category}} {{department}}
			{{/each}}
		</div>
	{{else}}
		<input type="text" id="currentHospital" placeholder="currentHospital" />
	{{/if}}
{{/if}}  
</template>