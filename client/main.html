<template name="main">
<header class="navbar" >
	<div class="navbar-inner">
  		{{> header}}
	</div>
</header>

<div id="main" class= "row-fluid" >
  {{#if adminLoggedIn}}
  	  {{> newKpiForm}}
	  {{> newTeamForm}}
	  
	  {{> bsckpis}}
	  {{> teams}}
  {{/if}}
</div>
</template>



<template name="header">
	<ul class="nav pull-right">
		<li>{{loginButtons}}</li>
	</ul>
<a class="brand" href="/"> HOPE </a>
<h1><a href='/'> 醫院績效管理 </a></h1>
{{#if adminLoggedIn}}
	{{#if showButtons}}
	<button id="bsckpis" class="btn btn-primary" "navbar-btn">指標</button>	
	<button id="newKpiForm" class="btn btn-warning" "navbar-btn">添加指標</button>	
	<button id="teams" class="btn btn-info" "navebar-btn">Depts</button>
	<button id="newTeamForm" class="btn btn-warning" "navebar-btn">添加團隊</button>
	<button id="printable" class="btn btn-default" "navbar-btn" >{{currentMode}}</button>
	{{/if}}
{{/if}}
</template>




<template name="newKpiForm">
{{#if show}}
	<form class="newKpiForm">
	<div class="controls">
		<input type= "text" id="perspective"  placeholder="一級維度" />
		<input type= "text" id="category"  placeholder="二級維度" />
		<input type="text" id="title"  placeholder="指標名稱" /> 
		<input type= "text" id="definition"  placeholder="定義" />
		<input type= "text" id="type"   placeholder="1大好,2小好,3接近好,4區間內好" />  
		<input type= "text" id="mesure"   placeholder="評分方法" /> 
		<input type="text" id="teams"  placeholder="適用團隊" />
		<button id="save" class="btn btn-info"> 完成 </button>
	</div>
	</form>
{{/if}}
</template>





<template name="bsckpis">
{{#if show}}
	<div class="bsckpis">
		<h1> 平衡記分卡指標庫 </h1>
		{{#each kpis}}
			{{> kpi}}
		{{/each}}
	</div>
{{/if}}
</template>




<template name="kpi">
{{#if editting}}
	{{> editKpiForm}}
{{else}}
	{{> viewKpiForm}}
{{/if}}
</template>




<template name="editKpiForm">
{{#if show}}
	<div class="editKpiForm">
		<ul>
			<li>一級維度 <input type= "text" id="perspective" value={{perspective}} placeholder="財務,客戶,內部流程,學習成長" /></li>
			<li>二級維度 <input type= "text" id="category" value={{category}} placeholder="小類" /></li>
			<li>指標名稱 <input type="text" id="title" value={{title}} placeholder="指標名稱" /></li> 
			<li>定義 <input type= "text" id="definition" value={{definition}} placeholder="定義說明" /></li>
			<li>評分類型 <input type= "text" id="type" value={{type}}  placeholder="1大好,2小好,3接近好,4區間內好" /></li>  
			<li>評分方法 <input type= "text" id="mesure" value={{mesure}}  placeholder="自比,他比,直接" /></li> 
			<li>適用團隊 <input type="text" id="teams" value={{teams}}  placeholder="團隊/部門/科室" /></li>
			<button id="save" class="btn btn-info"> 完成 </button>
		</ul>
	</div>
{{/if}}
</template>




<template name="viewKpiForm">
	<article class="viewKpiForm" >
		<ul class="inline" >
			<!--<a href="/perspective&{{perspective}}">-->
			<li>
				{{#if showButtons}}
					<button id="removeKPI" class="btn btn-danger btn-xs"> 删 </button>
					<button id="editKpiForm" class="btn btn-info btn-xs"> 編 </button>
				{{/if}} 
				{{perspective}}
			</li> 
			<li>{{category}}</li>
			<li><strong>{{title}}</strong></li>
			<li>定義: {{definition}}</li>
			<li>數據類型: {{type}}</li>  
			<li>評分方法: {{mesure}}</li>
			<li>適用團隊: {{teams}}</li>
			<!--<li>createdOn: {{createdOn}}</li> </!-->
		</ul>
	</article>
</template>



<template name="newTeamForm">
{{#if show}}
	{{#if hospital}}
		<div class="newTeamForm">
			<div class="basics">
				<input type="text" id="hospital"  value={{hospital}} placeholder="hospital" /> 
				<input type="text" id="team"  placeholder="名稱" /> 
				<input type="text" id="category"  placeholder="科別/組別" />	
			</div>
			<div class="selectKPIForm" >
				{{#each perspectives}}
					<input type="text" id="weight{{perspective}}" class="input-mini" placeholder=0 /> {{perspective}}  <br>
					<ul>
					{{#each kpis}}
						<li>
							<input type="text" id="weight{{title}}" class="input-mini" placeholder=0 /> {{title}}
							{{> viewKpiForm}}
						</li>
					{{/each}}
					</ul>
				{{/each}}	
			</div>	
			<button id="save" class="btn btn-info"> 完成 </button>
		</div>
	{{else}}
		<input type="text" id="hospital" placeholder="醫院名" />
	{{/if}}
{{/if}}
</template>

<template name="selectKPIForm">
	
</template>


<template name= "editTeamForm">
{{#if show}}
	<div class="editTeamForm">
		<div class="basics">
			<input type="text" id="hospital"  value={{hospital}} /> 
			<input type="text" id="team"  value="{{team}}" /> 
			<input type="text" id="category"  value="{{category}}" />	
		</div>
		<div class="selectKPIForm" >
			{{#each moreperspectives}}
				<h4><input type="text" id="weight{{perspective}}" class="input-mini" value="{{weight}}" /> {{perspective}} </h4>
				<ul>
				{{#each kpis}}
					<li>
						<input type="text" id="weight{{title}}" class="input-mini" value="{{weight}}" />{{title}} 
						{{> viewKpiForm}}
					</li>
				{{/each}}
				</ul>
			{{/each}}	
		</div>	
		<button id="save" class="btn btn-info"> 完成 </button>
	</div>
{{/if}}
</template>




<template name="newTeamKPIForm">
<div class="newTeamKPIForm">
	Finance <input type="text" id="weightFinance" class="input-mini" placeholder="權重" /> <br> 
	Client <input type="text" id="weightClient" class="input-mini" placeholder="權重" /> <br>
	Intern <input type="text" id="weightIntern" class="input-mini" placeholder="權重" /> <br>
	Study <input type="text" id="weightStudy" class="input-mini" placeholder="權重" /> 
</div>
</template> 


<template name="editTeamKPIForm">
{{#if show}}
<div class="editTeamKPIForm">
	Finance <input type="text" id="weightFinance" class="input-mini" placeholder= {{this.weightFinance}}  /> <br> 
	Client <input type="text" id="weightClient" class="input-mini" placeholder=0 /> <br>
	Intern <input type="text" id="weightIntern" class="input-mini" placeholder=0 /> <br>
	Study <input type="text" id="weightStudy" class="input-mini" placeholder=0 /> 
</div>
{{/if}}
</template> 


<template name="teams">
{{#if show}}
	{{#if hospital}}
		<div class="hospital">
			<h3> {{hospital}} </h3>
			<hr>
		</div>
		<div class="teams">
			<ul class="teams">
			{{#each teams}}
				<li> {{> team}} </li> 
				<hr>
			{{/each}}
			</ul>
		</div>
	{{else}}
		<input type="text" id="hospital" placeholder="醫院名" />
	{{/if}}
{{/if}}  
</template>




<template name= "team">
{{#if editting}}	
	{{> editTeamForm}}
{{else}}
	{{> viewTeamForm}}
{{/if}}
</template>





<template name= "viewTeamForm">
<article class="viewTeamForm">
	<h4> 
		{{#if showButtons}}
			<button id="removeTeam" class="btn btn-danger btn-xs"> 删 </button>
			<button id="editTeamForm" class="btn btn-info btn-xs"> 編 </button>
		{{/if}} 
 		{{team}} <a href="/category&{{category}}">{{category}}</a> 
	 </h4>
		 <div class="viewTeamForm">
			<div class="teamKPIForm" >
				{{#each perspectives}}
					<h4>{{weight}} {{perspective}}</h4>
					<ul>
					{{#each kpis}}
						<li>
							{{weight}} {{title}} 
							{{#if showKpiForm}}  
							{{> viewKpiForm}}
							{{/if}}
						</li>
					{{/each}}
					</ul>
				{{/each}}	
			</div>	
		</div>
</article>
</template>

